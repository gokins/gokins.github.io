<!DOCTYPE html>
<html lang="zh-cn" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Gavin" />
	
	
	
	<title>构建 Go 应用的一个示例333333 ｜ 思°</title>
	
    
    
    <meta name="description" content="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam nec interdum metus. Aenean rutrum ligula sodales ex auctor, sed tempus dui mollis. Curabitur ipsum dui, aliquet nec commodo at, tristique eget ante." />
    

    
    
    <meta name="keywords" content="思考, 技术, 编程, 架构, 管理, 商业" />
    

	
    
    <link rel="shortcut icon" href="https://blogcool.gitkin.com/images/favicon.ico" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://blogcool.gitkin.com/css/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://blogcool.gitkin.com/css/zozo.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://blogcool.gitkin.com/css/highlight.css" />
    
    
</head>


<body>
<div class="main animate__animated animate__fadeInDown">
    <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul>
            
            <li>
                <a href="/">首页</a>
            </li>
            
            <li>
                <a href="/posts/">文章</a>
            </li>
            
            <li>
                <a href="/tags/">标签</a>
            </li>
            
            <li>
                <a href="/about/">关于</a>
            </li>
            
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>
    <div class="header animated fadeInDown">
    <div class="site_title_container">
        <div class="site_title">
            <h1>
                <a href="/">
                    <span>思°</span>
                </a>
            </h1>
        </div>
        <div class="description">
            <p class="sub_title">思危 , 思变 , 思退</p>
            <div class="my_socials">
                
                
                <a href="https://www.yuque.com/gitkin/notes/vt0si0" title="cloud" target="_blank"><i class="ri-cloud-fill"></i></a>
                
                
                
                <a href="https://github.com/gokins" title="github" target="_blank"><i class="ri-github-fill"></i></a>
                
                
                
                <a href="https://weibo.com/aiwanfulishe" title="weibo" target="_blank"><i class="ri-weibo-fill"></i></a>
                
                
                
            </div>
        </div>
    </div>
</div>

    <div class="content">
        <div class="post_page">
            <div class="post animate__animated animate__fadeInDown">
                <div class="post_title post_detail_title">
                    <h2><a href='/posts/post3/'>构建 Go 应用的一个示例333333</a></h2>
                    <span class="date">2019.01.25</span>
                </div>
                <div class="post_content markdown"><p>刚开始我很好奇，为什么我把长地址 A 转换为短地址 B，然后用 B 去访问居然还是 A 地址的内容，浏览器是怎么做到的？
通过上面的请求过程示例，相信大家应该大概理解了请求短地址的原理了。
在百度短地址服务中，我们将 <a href="http://www.veryitman.com/">http://www.veryitman.com/</a> 转换为 <a href="https://dwz.cn/hnmau4Zs">https://dwz.cn/hnmau4Zs</a>  ，此时百度短地址服务维持了 短-长 地址的映射关系了而且是唯一的，当我们去访问 <a href="https://dwz.cn/hnmau4Zs">https://dwz.cn/hnmau4Zs</a> ，其实请求的是百度短地址服务，该服务将短地址对应的长地址（放在响应头的 Location 中）返回给我们的浏览器，并返回 302 状态码，此时浏览器就重定向到了 <a href="http://www.veryitman.com/">http://www.veryitman.com/</a> 这个网址上了。
简单总结一下其步骤如下：
Step-1、用户在浏览器里输入 <a href="https://dwz.cn/hnmau4Zs">https://dwz.cn/hnmau4Zs</a>  这个网址去访问;
Step-2、浏览器解析 DNS，获取该域名对应的 IP 地址;
Step-3、获取到 IP 后，浏览器发送 HTTP GET 请求查询 hnmau4Zs 并获取到 <a href="https://dwz.cn/hnmau4Zs">https://dwz.cn/hnmau4Zs</a>  对应的长地址;
Step-4、HTTP 通过 302 状态码转到去请求对应的长地址  <a href="http://www.veryitman.com/">http://www.veryitman.com/</a> 上面了。
我把 <a href="http://www.veryitman.com/">http://www.veryitman.com/</a> 放到百度和微博的短地址生成分别是：
// 百度短地址
<a href="https://dwz.cn/hnmau4Zs">https://dwz.cn/hnmau4Zs</a>
复制代码// 微博段地址
<a href="http://1t.click/aMtD">http://1t.click/aMtD</a>
复制代码可以看出百度生成较复杂，首先协议变成了 HTTPS，其次生成代码是 8 位（hnmau4Zs），而微博生成的是 4 位（aMtD）代码。
短地址码一般都是由26个大写字母  A-Z 、26个小写字母 a-z 和10个数字  0-9 共62个字符随机组合而成，那么可以这样来生成短地址码，我们定义一个62进制，把这62个字符按照10进制数转成62进制数，那么就可以得到每个字符对应的62进制数了。同理，将短地址还原的时候把62进制转换为对应的10进制就可以了。
根据上面算法，可以看出百度可以支持 62^8 个短地址，微博可以支持 62^4 个短地址。
关于短地址生成的算法，大家可以用 SpringBoot 自己撸一个或者去网上找找别人已经实现的。</p>
</div>
                <div class="post_footer">
                    
                </div>
            </div>

            
            <div class="pagination">
                <div class="pagination__buttons">
                    
                    <span class="button previous">
        <a href="https://sgo.cool/posts/post1/">
          <span class="button__icon">«</span>
          <span class="button__text">构建 Go 应用的一个示例11111</span>
        </a>
      </span>
                    
                    
                    <span class="button next">
        <a href="https://sgo.cool/posts/post4/">
          <span class="button__text">构建 Go 应用的一个示例44444444</span>
          <span class="button__icon">»</span>
        </a>
      </span>
                    
                </div>
            </div>
            
            
            
            
            
        </div>
    </div>
</div>
<a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
<footer class="footer">
    <div class="footer_slogan">
        <span>“ 路漫漫其修远兮，吾将上下而求索 ”</span>
    </div>
    <div class="powered_by">
        Theme Designed by <a href="https://varkai.com">VarKai</a>
        Proudly published with <a href="http://www.gohugo.io/">Hugo</a>
    </div>
</footer>
<script src="https://cdn.jsdelivr.net/gh/gokins/china-flag-icon/src/i-love-china.js"></script>

<script src="https://blogcool.gitkin.com/js/jquery-3.5.1.min.js"></script>
<link href="https://blogcool.gitkin.com/css/fancybox.min.css" rel="stylesheet">
<script src="https://blogcool.gitkin.com/js/fancybox.min.js"></script>
<script src="https://blogcool.gitkin.com/js/zozo.js"></script>





</body>

</html>
