<!DOCTYPE html>
<html lang="zh-cn" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Gavin" />
	
	
	
	<title>æ„å»º Go åº”ç”¨çš„ä¸€ä¸ªç¤ºä¾‹ ï½œ ğŸ‘»</title>
	
    
    
    <meta name="description" content="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam nec interdum metus. Aenean rutrum ligula sodales ex auctor, sed tempus dui mollis. Curabitur ipsum dui, aliquet nec commodo at, tristique eget ante." />
    

    
    
    <meta name="keywords" content="é¡¹ç›®ç®¡ç†, æŠ€æœ¯å®è·µ, ä»£ç ç¼–ç¨‹, æ¶æ„, æ•ˆç‡, å•†ä¸š" />
    

	
    
    <link rel="shortcut icon" href="https://blogcool.gitkin.com/images/favicon.ico" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://blogcool.gitkin.com/css/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://blogcool.gitkin.com/css/zozo.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://blogcool.gitkin.com/css/highlight.css" />
    
    
</head>


<body>
<div class="main animate__animated animate__fadeInDown">
    <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul>
            
            <li>
                <a href="/">é¦–é¡µ</a>
            </li>
            
            <li>
                <a href="/posts/">æ–‡ç« </a>
            </li>
            
            <li>
                <a href="/tags/">æ ‡ç­¾</a>
            </li>
            
            <li>
                <a href="/about/">å…³äº</a>
            </li>
            
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>
    <div class="header animated fadeInDown">
    <div class="site_title_container">
        <div class="site_title">
            <h1>
                <a href="/">
                    <span>ğŸ‘»</span>
                </a>
            </h1>
        </div>
        <div class="description">
            <p class="sub_title">å…³æ³¨å·¥ç¨‹å®è·µã€æ•ˆç‡å’Œå•†ä¸š</p>
            <div class="my_socials">
                
                
                <a href="https://www.yuque.com/gitkin/notes/vt0si0" title="cloud" target="_blank"><i class="ri-cloud-fill"></i></a>
                
                
                
                <a href="https://github.com/gokins" title="github" target="_blank"><i class="ri-github-fill"></i></a>
                
                
                
                <a href="https://weibo.com/aiwanfulishe" title="weibo" target="_blank"><i class="ri-weibo-fill"></i></a>
                
                
                
            </div>
        </div>
    </div>
</div>

    <div class="content">
        <div class="post_page">
            <div class="post animate__animated animate__fadeInDown">
                <div class="post_title post_detail_title">
                    <h2><a href='/posts/first/'>æ„å»º Go åº”ç”¨çš„ä¸€ä¸ªç¤ºä¾‹</a></h2>
                    <span class="date">2019.01.25</span>
                </div>
                <div class="post_content markdown"><p>ä½¿ç”¨å¤šé˜¶æ®µæ„å»º
å¤šé˜¶æ®µæ„å»ºå¯ä»¥æœ‰æ•ˆå‡å°é•œåƒä½“ç§¯ï¼Œç‰¹åˆ«æ˜¯å¯¹äºéœ€ç¼–è¯‘è¯­è¨€è€Œè¨€ï¼Œä¸€ä¸ªåº”ç”¨çš„æ„å»ºè¿‡ç¨‹å¾€å¾€å¦‚ä¸‹</p>
<p>å®‰è£…ç¼–è¯‘å·¥å…·
å®‰è£…ç¬¬ä¸‰æ–¹åº“ä¾èµ–
ç¼–è¯‘æ„å»ºåº”ç”¨</p>
<p>è€Œåœ¨å‰ä¸¤æ­¥ä¼šæœ‰å¤§é‡çš„é•œåƒä½“ç§¯å†—ä½™ï¼Œä½¿ç”¨å¤šé˜¶æ®µæ„å»ºå¯ä»¥é¿å…è¿™ä¸€é—®é¢˜
è¿™æ˜¯æ„å»º Go åº”ç”¨çš„ä¸€ä¸ªç¤ºä¾‹
FROM golang:1.11-alpine AS build</p>
<h1 id="install-tools-required-for-project">Install tools required for project</h1>
<h1 id="run-docker-build---no-cache--to-update-dependencies">Run <code>docker build --no-cache .</code> to update dependencies</h1>
<p>RUN apk add &ndash;no-cache git
RUN go get github.com/golang/dep/cmd/dep</p>
<h1 id="list-project-dependencies-with-gopkgtoml-and-gopkglock">List project dependencies with Gopkg.toml and Gopkg.lock</h1>
<h1 id="these-layers-are-only-re-built-when-gopkg-files-are-updated">These layers are only re-built when Gopkg files are updated</h1>
<p>COPY Gopkg.lock Gopkg.toml /go/src/project/
WORKDIR /go/src/project/</p>
<h1 id="install-library-dependencies">Install library dependencies</h1>
<p>RUN dep ensure -vendor-only</p>
<h1 id="copy-the-entire-project-and-build-it">Copy the entire project and build it</h1>
<h1 id="this-layer-is-rebuilt-when-a-file-changes-in-the-project-directory">This layer is rebuilt when a file changes in the project directory</h1>
<p>COPY . /go/src/project/
RUN go build -o /bin/project</p>
<h1 id="this-results-in-a-single-layer-image">This results in a single layer image</h1>
<p>FROM scratch
COPY &ndash;from=build /bin/project /bin/project
ENTRYPOINT [&quot;/bin/project&rdquo;]
CMD [&quot;&ndash;help&rdquo;]
å¤åˆ¶ä»£ç è¿™æ˜¯æ„å»ºå‰ç«¯åº”ç”¨çš„ä¸€ä¸ªç¤ºä¾‹ï¼Œå¯ä»¥å‚è€ƒ å¦‚ä½•ä½¿ç”¨ docker é«˜æ•ˆéƒ¨ç½²å‰ç«¯åº”ç”¨
FROM node:10-alpine as builder</p>
<p>ENV PROJECT_ENV production
ENV NODE_ENV production</p>
<h1 id="http-server-ä¸å˜åŠ¨ä¹Ÿå¯ä»¥åˆ©ç”¨ç¼“å­˜">http-server ä¸å˜åŠ¨ä¹Ÿå¯ä»¥åˆ©ç”¨ç¼“å­˜</h1>
<p>WORKDIR /code</p>
<p>ADD package.json /code
RUN npm install &ndash;production</p>
<p>ADD . /code
RUN npm run build</p>
<h1 id="é€‰æ‹©æ›´å°ä½“ç§¯çš„åŸºç¡€é•œåƒ">é€‰æ‹©æ›´å°ä½“ç§¯çš„åŸºç¡€é•œåƒ</h1>
<p>FROM nginx:10-alpine
COPY &ndash;from=builder /code/public /usr/share/nginx/html
å¤åˆ¶ä»£ç é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…
å‡å°ä½“ç§¯ï¼Œå‡å°‘æ„å»ºæ—¶é—´ã€‚å¦‚å‰ç«¯åº”ç”¨ä½¿ç”¨ npm install &ndash;production åªè£…ç”Ÿäº§ç¯å¢ƒæ‰€ä¾èµ–çš„åŒ…ã€‚
ä¸€ä¸ªå®¹å™¨åªåšä¸€ä»¶äº‹
å¦‚ä¸€ä¸ªwebåº”ç”¨å°†ä¼šåŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼Œweb æœåŠ¡ï¼Œæ•°æ®åº“ä¸ç¼“å­˜ã€‚æŠŠä»–ä»¬è§£è€¦åˆ°å¤šä¸ªå®¹å™¨ä¸­ï¼Œæ–¹ä¾¿æ¨ªå‘æ‰©å±•ã€‚å¦‚æœä½ éœ€è¦ç½‘ç»œé€šä¿¡ï¼Œåˆ™å¯ä»¥å°†ä»–ä»¬è‡³äºä¸€ä¸ªç½‘ç»œä¸‹ã€‚</p>
</div>
                <div class="post_footer">
                    
                </div>
            </div>

            
            <div class="pagination">
                <div class="pagination__buttons">
                    
                    <span class="button previous">
        <a href="https://u0.pm/posts/hello/">
          <span class="button__icon">Â«</span>
          <span class="button__text">Hello Friend</span>
        </a>
      </span>
                    
                    
                    <span class="button next">
        <a href="https://u0.pm/posts/post1/">
          <span class="button__text">æ„å»º Go åº”ç”¨çš„ä¸€ä¸ªç¤ºä¾‹11111</span>
          <span class="button__icon">Â»</span>
        </a>
      </span>
                    
                </div>
            </div>
            
            
            
            
            
        </div>
    </div>
</div>
<a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
<footer class="footer">
    <div class="footer_slogan">
        <span>â€œ è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢ â€</span>
    </div>
    <div class="powered_by">
        Powered By Hugo.
    </div>
</footer>
<script src="https://cdn.jsdelivr.net/gh/gokins/china-flag-icon/src/i-love-china.js"></script>

<script src="https://blogcool.gitkin.com/js/jquery-3.5.1.min.js"></script>
<link href="https://blogcool.gitkin.com/css/fancybox.min.css" rel="stylesheet">
<script src="https://blogcool.gitkin.com/js/fancybox.min.js"></script>
<script src="https://blogcool.gitkin.com/js/zozo.js"></script>





</body>

</html>
